# Configuration for Lower League Football Value Bettor

# Data source configuration
data:
  base_url: "https://www.football-data.co.uk/mmz4281"
  divisions:
    - "E0"  # Premier League 
    - "E2"  # League One
    - "E3"  # League Two
    - "EC"  # National League
  
  # Seasons to download (format: YYZZ for 20YY/20ZZ season)
  # Extended dataset: 16 seasons from 2010/11 to 2025/26
  seasons:
    - "1011"  # 2010/11
    - "1112"  # 2011/12
    - "1213"  # 2012/13
    - "1314"  # 2013/14
    - "1415"  # 2014/15
    - "1516"  # 2015/16
    - "1617"  # 2016/17
    - "1718"  # 2017/18
    - "1819"  # 2018/19
    - "1920"  # 2019/20 (COVID-shortened)
    - "2021"  # 2020/21
    - "2122"  # 2021/22
    - "2223"  # 2022/23
    - "2324"  # 2023/24
    - "2425"  # 2024/25
    - "2526"  # 2025/26 (CURRENT SEASON)
  
  # Output paths
  raw_data_dir: "data/raw"
  processed_data_path: "data/processed/all_matches.csv"

# Feature engineering parameters
features:
  # Form calculation windows
  form_windows:
    - 5   # Last 5 games
    - 10  # Last 10 games
  
  # Minimum matches required for team statistics
  min_matches_for_stats: 3
  
  # Head-to-head lookback (number of previous meetings)
  h2h_lookback: 5

# Model configuration
models:
  # Test set size (most recent matches) - reduced to 15% to maximize training data
  test_size: 0.15
  
  # Random state for reproducibility
  random_state: 42
  
  # XGBoost hyperparameters - increased for larger dataset
  xgboost:
    n_estimators: 300  # Increased from 200
    max_depth: 8       # Increased from 6
    learning_rate: 0.03  # Slightly reduced for more iterations
    subsample: 0.8
    colsample_bytree: 0.8
    min_child_weight: 3
    gamma: 0.1
    reg_alpha: 0.1
    reg_lambda: 1.0
  
  # LightGBM hyperparameters - increased for larger dataset
  lightgbm:
    n_estimators: 300  # Increased from 200
    max_depth: 8       # Increased from 6
    learning_rate: 0.03  # Slightly reduced for more iterations
    subsample: 0.8
    colsample_bytree: 0.8
    min_child_samples: 20
    reg_alpha: 0.1
    reg_lambda: 1.0
  
  # Model save path
  model_save_dir: "models"

# Backtesting configuration
backtest:
  # Value bet threshold (bet if model_prob - implied_prob > threshold)
  # Increased from 5% to 10% for more selective betting
  value_threshold: 0.10  # 10% edge required
  
  # Kelly criterion fraction (use fractional Kelly for safety)
  # Reduced from 0.10 to 0.05 for more conservative stake sizing
  kelly_fraction: 0.05  # One-twentieth Kelly (very conservative)
  
  # Starting bankroll for simulation
  starting_bankroll: 1000.0
  
  # Minimum odds to consider (avoid very low odds with high variance)
  # Increased from 1.5 to 1.8 to avoid favorites
  min_odds: 1.8
  
  # Maximum odds to consider (avoid very high odds with low probability)
  # Reduced from 10.0 to 6.0 to avoid longshots
  max_odds: 6.0
  
  # Vig removal method: 'margin' or 'power'
  vig_method: "margin"

# Prediction configuration
prediction:
  # Minimum model probability to consider betting
  min_model_prob: 0.15
  
  # Bookmakers to use for odds (in order of preference)
  bookmakers:
    - "PS"     # Pinnacle
    - "B365"   # Bet365
    - "Avg"    # Average

# Visualization settings
visualization:
  figure_size: [12, 8]
  dpi: 100
  style: "seaborn-v0_8-darkgrid"
  save_dir: "data/visualizations"
